generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                     String        @id @default(cuid())
  status                 AccountStatus
  type                   AccountType
  name                   String?
  genero                 String
  dateOfBirth            DateTime?
  email                  String        @unique
  phone                  String
  password               String?
  resetPasswordToken     String?
  resetPasswordExpires   DateTime?
  emailVerified          DateTime?
  emailVerificationToken String?
  googleId               String?       @unique
  avatar                 String?
  createdAt              DateTime      @default(now())
  updatedAt              DateTime      @updatedAt
  cpf_or_cnpj            String?
  acceptOffers           Boolean?      @default(false)
  acceptTerms            Boolean?      @default(false)
  documentType           String?
  addresses              Address[]
  cart                   Cart?
  order                  Order[]
  orderItems             OrderItems[]
  reviews                Review[]
  wishlist               Wishlist?
}

model Product {
  id             String         @id @unique @default(uuid())
  title          String
  price          Float
  old_price      Float
  rating         Int?
  promotion_time Int?
  description    String
  products_sold  Int?
  endDate        DateTime?
  bigsale        Boolean        @default(false)
  sku            String         @unique
  stock          Int
  category       String
  brand          String
  tags           String[]
  weight         Float?
  width          Float?
  height         Float?
  length         Float?
  isActive       Boolean        @default(true)
  featured       Boolean        @default(false)
  categoryId     String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  emphasis       Boolean        @default(false)
  color          String[]
  size           String[]
  cartItem       CartItem[]
  images         Image[]
  orderItems     OrderItems[]
  Category       Category?      @relation(fields: [categoryId], references: [id])
  reviews        Review[]
  wishlistItem   WishlistItem[]
}

model Image {
  id        String  @id @unique @default(uuid())
  image     String
  productId String
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)
}

model Address {
  id          String      @id @default(uuid())
  street      String
  number      String
  city        String
  state       String
  zip         String
  country     String
  complemento String?
  addressType AddressType @default(shipping)
  isDefault   Boolean     @default(false)
  userId      String?
  user        User?       @relation(fields: [userId], references: [id], onDelete: Cascade)
  order       Order[]
}

model Order {
  id                 String         @id @unique @default(uuid())
  userId             String
  total_amount       Float
  status             OrderStatus
  payment_method     String
  total_quantity     Float
  addressId          String
  tracking_number    String?
  estimated_delivery DateTime?
  notes              String?
  coupon_code        String?
  discount_amount    Float?
  paymentDetailsId   String?
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  address            Address        @relation(fields: [addressId], references: [id], onDelete: Cascade)
  paymentDetail      PaymentDetail? @relation(fields: [paymentDetailsId], references: [id])
  user               User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  orderItems         OrderItems[]
}

model OrderItems {
  id        String   @id @unique @default(uuid())
  orderId   String
  productId String
  userId    String
  quantity  Int
  price     Float
  options   Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  order     Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Review {
  id        String   @id @unique @default(uuid())
  userId    String
  productId String
  rating    Int
  comment   String?
  title     String?
  images    String[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Coupon {
  id             String   @id @unique @default(uuid())
  code           String   @unique
  discount_value Int
  min_purchase   Float?
  max_usage      Int?
  used_count     Int      @default(0)
  end_date       DateTime
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  discount_type  Int
  start_date     Int
}

model Category {
  id          String     @id @unique @default(uuid())
  name        String
  description String?
  image       String?
  parentId    String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  parent      Category?  @relation("SubCategories", fields: [parentId], references: [id])
  children    Category[] @relation("SubCategories")
  products    Product[]
}

model Wishlist {
  id        String         @id @unique @default(uuid())
  userId    String         @unique
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
  user      User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  items     WishlistItem[]
}

model WishlistItem {
  id         String   @id @unique @default(uuid())
  wishlistId String
  productId  String
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  product    Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  wishlist   Wishlist @relation(fields: [wishlistId], references: [id], onDelete: Cascade)

  @@unique([wishlistId, productId])
}

model Cart {
  id        String     @id @unique @default(uuid())
  userId    String     @unique
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  user      User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  items     CartItem[]
}

model CartItem {
  id        String   @id @unique @default(uuid())
  cartId    String
  productId String
  quantity  Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  color     String[]
  size      String[]
  cart      Cart     @relation(fields: [cartId], references: [id], onDelete: Cascade)
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
}

model PaymentDetail {
  id             String   @id @unique @default(uuid())
  provider       String
  transaction_id String?
  status         String
  last_four      String?
  card_type      String?
  amount         Float
  currency       String   @default("BRL")
  receipt_url    String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  orders         Order[]
}

model SiteContent {
  id              String          @id @unique @default(uuid())
  banner          String?
  video           String?
  bg_video        String?
  image_logo      String?
  title           String?
  metaTitle       String?
  metaDescription String?
  favicon         String?
  service         String[]
  footerText      String?
  openingHours    String?
  isActive        Boolean         @default(true)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
  keywords        String[]
  image_openGraph String?
  contactInfo     ContactInfo[]
  promotionHero   PromotionHero[]
  promotions      Promotions[]
  socialMedia     SocialMedia[]
  themeColors     ThemeColors[]
}

model Promotions {
  id            String      @id @unique @default(uuid())
  title         String
  slug          String      @unique //para url amigavel
  banner        String?
  video         String?
  description   String?
  discountType  String?
  discountValue Float?
  couponCode    String?
  isActive      Boolean     @default(true)
  endDate       DateTime?
  buttonText    String?
  buttonLink    String?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  siteContentId String
  startDate     Int?
  position      String      @default("")
  siteContent   SiteContent @relation(fields: [siteContentId], references: [id], onDelete: Cascade)
}

model PromotionHero {
  id            String      @id @unique @default(uuid())
  title         String
  subTitle      String
  sale          String
  description   String
  image         String?
  buttonText    String?
  buttonLink    String?
  position      String?
  isActive      Boolean     @default(true)
  order         Int         @default(0)
  endDate       DateTime?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  siteContentId String
  startDate     Int?
  siteContent   SiteContent @relation(fields: [siteContentId], references: [id], onDelete: Cascade)
}

model SocialMedia {
  id            String      @id @unique @default(uuid())
  siteContentId String
  name          String
  link          String
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  siteContent   SiteContent @relation(fields: [siteContentId], references: [id], onDelete: Cascade)
}

model ContactInfo {
  id            String      @id @unique @default(uuid())
  siteContentId String
  type          String
  value         String
  label         String?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  siteContent   SiteContent @relation(fields: [siteContentId], references: [id], onDelete: Cascade)
}

model ThemeColors {
  id             String      @id @unique @default(uuid())
  siteContentId  String
  nameTheme      String?
  primaryColor   String?
  secondaryColor String?
  hover          String?
  star           String?
  danger         String?
  success        String? //Cor para mensagens de sucesso
  warning        String? //Cor para alertas ou avisos
  shadowColor    String? //Cor das sombras, se aplic√°vel
  isDarkTheme    Boolean?    @default(false)
  price          String?
  title          String?
  textColor      String?
  oldPrice       String?
  borderColor    String?
  textButton     String?
  bgCard         String?
  themeColor     String?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  themeSelected  Boolean     @default(false)
  textHover      String?
  siteContent    SiteContent @relation(fields: [siteContentId], references: [id], onDelete: Cascade)
}

enum AccountType {
  useradmin
  userdefault
}

enum AccountStatus {
  ativo
  inativo
}

enum OrderStatus {
  pending
  sent
  completed
  cancel
}

enum AddressType {
  shipping
  billing
  both
}
